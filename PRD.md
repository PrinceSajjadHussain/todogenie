# PRD: AI-Enhanced To-Do Application

**Author:** AI Developer Candidate
**Date:** 2024-08-09
**Version:** 1.0

---

## 1. Overview & Goal

This document outlines the Product Requirements for an AI-enhanced To-Do application. The primary goal is to deliver a seamless and intelligent task management experience by integrating cutting-edge AI to automate subtask creation and provide on-demand translation. The application will be built with a modern tech stack, ensuring a fast, accessible, and persistent user experience.

---

## 2. Tech Stack

- **Frontend:** React, Vite, TypeScript
- **Styling:** Tailwind CSS, shadcn/ui
- **Backend & Database:** Supabase (PostgreSQL, Edge Functions)
- **AI Services:**
  - **Subtask Generation:** Google Gemini 1.5 Pro
  - **Translation:** Google Gemini 1.5 Pro
- **Deployment:** Vercel

---

## 3. Core Features

### 3.1. Task Management
- **Create Task:** Users can add new tasks with a title, optional description, due date, and priority level (Low, Medium, High).
- **View & Filter Tasks:** A clean, filterable list displays all tasks. Users can filter by completion status, priority, or search by keywords in the title.
- **Mark as Complete:** Tasks can be toggled between complete and incomplete states, with a clear visual distinction (e.g., line-through).
- **Persistent Storage:** All tasks and their related data are securely stored in a Supabase database, ensuring data is never lost between sessions.

### 3.2. AI-Powered Subtasks
- **Automatic Generation:** Upon creating a new task, a Supabase Edge Function is triggered, calling the Gemini API to generate 3â€“7 actionable subtasks based on the task's title and description.
- **View & Manage Subtasks:** In the task details modal, users can view the list of AI-generated subtasks, mark them as complete, or add their own manual subtasks.
- **Regenerate Subtasks:** If the initial set of subtasks is not satisfactory, users can trigger a regeneration to get a new list from the AI.

### 3.3. On-Demand Translation
- **Translate Task:** Users can translate any task's title and description into a language of their choice by simply typing the target language (e.g., "Spanish," "Urdu").
- **Cached Translations:** To improve performance and reduce API costs, translations are cached in the database. Subsequent requests for the same language are served from the cache, indicated by a badge.
- **Multi-language Support:** The app supports a wide range of languages, leveraging the power of the Gemini API.

---

## 4. Non-Functional Requirements

- **Performance:** The application must be fast and responsive, with lazy loading for components and optimized API calls.
- **Accessibility:** All UI components must be fully accessible, with proper ARIA attributes and keyboard navigation support.
- **Security:** For this demo, Supabase Row Level Security (RLS) is permissive. In a production environment, RLS would be configured to restrict data access on a per-user basis.
- **AI Reliability:** AI-powered features include built-in resilience, with up to three retry attempts for API calls and a fallback mechanism to ensure a graceful user experience even if the AI fails.

---

## 5. Success Criteria

- **Seamless Task Creation:** A new task appears instantly in the UI upon creation, and its AI-generated subtasks are populated automatically within a few seconds.
- **Accurate AI Features:** Subtasks generated by the AI are relevant and actionable. Translations are accurate and context-aware.
- **Effective Caching:** Cached translations are correctly retrieved and displayed, with a clear visual indicator.
- **Flawless Filtering:** The search and filter functionalities work as expected, allowing users to quickly find the tasks they need.
- **Professional Look & Feel:** The application is visually polished, with a clean, modern design that is both aesthetically pleasing and easy to navigate.

---

## 6. Developer Documentation

### 6.1. API Endpoints (Supabase Edge Functions)
- `POST /functions/v1/ai-generate-subtasks`
  - **Payload:** `{ "taskId": "...", "title": "...", "description": "..." }`
  - **Returns:** `{ "inserted": 3 }`
- `POST /functions/v1/ai-translate`
  - **Payload:** `{ "taskId": "...", "language": "..." }`
  - **Returns:** `{ "cached": false, "translation": { ... } }`

### 6.2. Database Schema
- **`tasks` table:**
  - `id` (uuid, pk), `title` (text), `description` (text), `priority` (enum), `due_date` (date), `completed` (bool)
- **`subtasks` table:**
  - `id` (uuid, pk), `task_id` (fk), `title` (text), `notes` (text), `estimated_minutes` (int), `completed` (bool)
- **`translations` table:**
  - `id` (uuid, pk), `task_id` (fk), `language` (text), `translated_text` (text)

### 6.3. Environment Variables
- `VITE_SUPABASE_URL`: The URL of the Supabase project.
- `VITE_SUPABASE_PUBLISHABLE_KEY`: The anonymous, publishable key for the Supabase project.
- `GEMINI_API_KEY`: The API key for the Google Gemini service (required for Edge Functions).
